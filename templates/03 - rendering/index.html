<!DOCTYPE HTML>

<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <meta name="author" content="Yann Gilquin">
        <meta name="description" content="Formation WebGL - Rendering Template">

        <title>Rendering Template</title>

        <style>
            html, body {
                background-color: #202020;
                margin: 0px;
                overflow: hidden;
                width: 100%;
                height: 100%;
            }

            canvas {
                width: 400px;
                height: 400px;
                touch-action: none;
            }
        </style>

        <script src="../lib/webgl-utils.js" type="text/javascript"></script>
    </head>

    <body>
        <canvas id="canvas" width="400" height="400"></canvas>

        <script>
            /*
             * Get WebGL rendering context
             */
            var canvas = document.getElementById("canvas");
            var gl = WebGLUtils.setupWebGL(canvas);

            /*
             * Init function
             * Setup globals, create instances and load ressources (sync/async)
             * Actions will end up with the onInitDone callback
             */
            function init()
            {
                console.log("Init ...");

                // Setup and resources loading ...

                // call init done callback async for lesson purpose, should be called once everything is ready
                window.setTimeout(onInitDone, 0);
            }

            /*
             * Init done callback
             * Everything is ready, start animation
             */
            function onInitDone()
            {
                console.log("Init done, start animation");
                animate();
            }

            /*
             * Animation routine
             * Called once per frame
             *
             * Schedule next frame
             * Update the current state
             * Call render routine
             */
            function animate()
            {
                console.log("Animate ...");

                // Schedule next frame
                window.requestAnimationFrame(animate);

                // Update current state
                // ...

                // Render
                render();
            }

            /*
             * Render routine
             * Invoke draw calls
             */
            function render()
            {
                console.log("Render ...");
            }

            init();

        </script>

    </body>

</html>

